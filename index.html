<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•±</title>
<style>
body { font-family: system-ui; margin:0; background: linear-gradient(135deg,#a1c4fd,#c2e9fb); color:#333; }
.container { max-width:420px; margin:0 auto; padding:15px; }
header { background:#4f46e5; color:white; text-align:center; padding:15px; font-size:18px; border-radius:0 0 15px 15px;}
.menu { display:flex; justify-content:space-around; margin:10px 0; }
.menu button { flex:1; margin:0 3px; padding:10px; border:none; border-radius:10px; background:#6b7280; color:white; cursor:pointer;}
.menu button.active { background:#4f46e5; }
.screen { display:none; }
.screen.active { display:block; }
.card { background:white; border-radius:16px; padding:15px; margin-bottom:15px; box-shadow:0 6px 15px rgba(0,0,0,.08);}
input, select { width:100%; padding:8px; margin-top:5px; margin-bottom:5px;}
#chat { height:200px; overflow-y:auto; border:1px solid #ddd; padding:10px; border-radius:10px; background:#f9f9f9; }
.msg { margin-bottom:10px; }
.user { font-weight:bold; color:#4f46e5; }
.ai { font-weight:bold; color:#16a34a; }
</style>
</head>
<body>
<header>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•±</header>

<div class="container">
  <div class="menu">
    <button onclick="showScreen('login')" id="btnLogin">ë¡œê·¸ì¸</button>
    <button onclick="showScreen('mental')" id="btnMental">ë©˜íƒˆ</button>
    <button onclick="showScreen('food')" id="btnFood">ìŒì‹</button>
    <button onclick="showScreen('game')" id="btnGame">ë¯¸ë‹ˆê²Œì„</button>
    <button onclick="showScreen('chat')" id="btnChat">AI ìƒë‹´</button>
    <button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
  <div class="screen" id="login">
    <div class="card">
      <h2>ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h2>
      <input type="text" id="username" placeholder="ì´ë¦„">
      <input type="number" id="age" placeholder="ë‚˜ì´">
      <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
      <button onclick="signup()">íšŒì›ê°€ì…</button>
      <button onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginMsg"></p>
    </div>
  </div>

  <!-- ë©˜íƒˆ ê´€ë¦¬ -->
  <div class="screen" id="mental">
    <div class="card">
      <h2>ğŸ§ ë©˜íƒˆ ìƒíƒœ</h2>
      <button onclick="setMood('ğŸ˜„')">ì¢‹ìŒ</button>
      <button onclick="setMood('ğŸ˜')">ë³´í†µ</button>
      <button onclick="setMood('ğŸ˜¢')">ë‚˜ì¨</button>
      <p id="moodComment"></p>
    </div>
    <div class="card">
      <h2>ğŸŒ™ ìˆ˜ë©´ ì‹œê°„</h2>
      <select id="sleepPeriod"><option>ì˜¤ì „</option><option>ì˜¤í›„</option></select>
      <input type="number" id="sleep" placeholder="ì‹œê°„ ì…ë ¥">
      <button onclick="saveSleep()">ì €ì¥</button>
      <p id="sleepLog"></p>
    </div>
  </div>

  <!-- ìŒì‹ ì¶”ì²œ -->
  <div class="screen" id="food">
    <div class="card">
      <h2>ğŸ¥— ì˜¤ëŠ˜ì˜ ì¶”ì²œ ìŒì‹</h2>
      <p id="foodDisplay"></p>
      <button onclick="pickFood()">ìƒˆë¡œ ì¶”ì²œ</button>
    </div>
  </div>

  <!-- ë¯¸ë‹ˆê²Œì„ -->
  <div class="screen" id="game">
    <div class="card">
      <h2>ğŸ® ë¯¸ë‹ˆê²Œì„</h2>
      <p id="gameQ"></p>
      <input type="text" id="gameAns" placeholder="ì •ë‹µ ì…ë ¥">
      <button onclick="submitGame()">ì œì¶œ</button>
      <p id="gameResult"></p>
      <button onclick="newGame()">ë‹¤ìŒ ë¬¸ì œ</button>
    </div>
  </div>

  <!-- AI ìƒë‹´ -->
  <div class="screen" id="chat">
    <div class="card">
      <h2>ğŸ’¬ AI ìƒë‹´</h2>
      <div id="chatBox"></div>
      <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ ì…ë ¥">
      <button onclick="sendMessage()">ì „ì†¡</button>
    </div>
  </div>

</div>

<script>
let foods=[], aiData=[], games=[];
let currentGame={};
let currentUser=null;

// í™”ë©´ ì „í™˜
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// íšŒì›ê°€ì…
function signup(){
  let name=document.getElementById("username").value;
  let age=document.getElementById("age").value;
  let pw=document.getElementById("password").value;
  if(!name||!age||!pw){ document.getElementById("loginMsg").textContent="ëª¨ë“  í•­ëª© ì…ë ¥!"; return; }
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[name]){ document.getElementById("loginMsg").textContent="ì´ë¯¸ ìˆëŠ” ì´ë¦„"; return; }
  users[name]={age:age,password:pw};
  localStorage.setItem("users",JSON.stringify(users));
  document.getElementById("loginMsg").textContent="íšŒì›ê°€ì… ì™„ë£Œ!";
}

// ë¡œê·¸ì¸
function login(){
  let name=document.getElementById("username").value;
  let pw=document.getElementById("password").value;
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[name]&&users[name].password===pw){
    currentUser={name:name,age:users[name].age};
    document.getElementById("loginMsg").textContent=`í™˜ì˜í•©ë‹ˆë‹¤, ${name}ë‹˜!`;
    showScreen("mental");
  } else { document.getElementById("loginMsg").textContent="ë¡œê·¸ì¸ ì‹¤íŒ¨"; }
}

// ë¡œê·¸ì•„ì›ƒ
function logout(){
  currentUser=null;
  showScreen("login");
}

// ë©˜íƒˆ
let moodComments={"ğŸ˜„":["ì¢‹ì•„ìš”! ê³„ì† ì´ë ‡ê²Œ í–‰ë³µí•˜ê²Œ ì§€ë‚´ìš” ğŸ˜„"],"ğŸ˜":["ë³´í†µì´ë„¤ìš”. ì‚°ì±… ì–´ë•Œìš”?"],"ğŸ˜¢":["ê´œì°®ì•„ìš”. ìŠ¤íŠ¸ë ˆì¹­ ì¶”ì²œ!"]};
function setMood(m){
  document.getElementById("moodComment").textContent=moodComments[m][Math.floor(Math.random()*moodComments[m].length)];
  localStorage.setItem("mood",m);
}
function saveSleep(){
  let s=document.getElementById("sleep").value;
  let p=document.getElementById("sleepPeriod").value;
  if(!currentUser){ alert("ë¡œê·¸ì¸ í•„ìš”"); return; }
  let data=JSON.parse(localStorage.getItem("userData")||"{}");
  data[currentUser.name]={sleep:`${p} ${s}ì‹œê°„`};
  localStorage.setItem("userData",JSON.stringify(data));
  document.getElementById("sleepLog").textContent=`${p} ${s}ì‹œê°„ ì €ì¥ë¨`;
}

// JSON ë¡œë”©
async function loadJSON(){
  foods=await fetch("foods.json").then(r=>r.json());
  aiData=await fetch("aiKeywords.json").then(r=>r.json());
  games=await fetch("games.json").then(r=>r.json());
  pickFood();
  newGame();
}
loadJSON();

// ìŒì‹ ì¶”ì²œ
function pickFood(){
  if(foods.length===0) return;
  let f=foods[Math.floor(Math.random()*foods.length)];
  document.getElementById("foodDisplay").textContent=`${f.cat}: ${f.name}`;
}

// ë¯¸ë‹ˆê²Œì„
function newGame(){
  if(games.length===0) return;
  currentGame=games[Math.floor(Math.random()*games.length)];
  document.getElementById("gameQ").textContent=currentGame.q;
  document.getElementById("gameAns").value="";
  document.getElementById("gameResult").textContent="";
}
function submitGame(){
  let ans=document.getElementById("gameAns").value.trim();
  if(ans===currentGame.a){ document.getElementById("gameResult").textContent="âœ… ì •ë‹µ!"; }
  else { document.getElementById("gameResult").textContent=`âŒ ì˜¤ë‹µ! ì •ë‹µ: ${currentGame.a}`; }
}

// AI ìƒë‹´
function sendMessage(){
  let input=document.getElementById("userInput").value.trim();
  if(!input) return;
  addChat("user", input);
  document.getElementById("userInput").value="";
  let response="ì£„ì†¡í•´ìš”, ì´í•´ ëª»í–ˆì–´ìš”";
  for(let item of aiData){
    for(let k of item.k){
      if(input.includes(k)){
        response=item.r[Math.floor(Math.random()*item.r.length)];
        break;
      }
    }
  }
  addChat("ai", response);
}
function addChat(type,text){
  let chat=document.getElementById("chatBox");
  let div=document.createElement("div");
  div.className="msg "+type;
  div.textContent=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}
</script>
</body>
</html>

<!-- deploy test -->
