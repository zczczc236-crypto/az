<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•± (ì™„ì „í˜•)</title>
<style>
:root{
  --pri:#4f46e5; --sec:#22c55e; --bg:#eef2ff; --card:#ffffff; --txt:#1f2937;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  background:linear-gradient(135deg,#a1c4fd,#c2e9fb); color:var(--txt);
}
header{
  background:var(--pri); color:#fff; padding:14px; text-align:center;
  font-weight:800; font-size:18px; border-radius:0 0 16px 16px;
}
.container{max-width:420px; margin:0 auto; padding:14px}
.menu{display:flex; flex-wrap:wrap; gap:6px; margin-bottom:10px}
.menu button{
  flex:1 1 30%; border:none; border-radius:12px; padding:10px;
  background:#6b7280; color:#fff; font-weight:600;
}
.menu button.primary{background:var(--pri)}
.card{
  background:var(--card); border-radius:18px; padding:14px; margin-bottom:14px;
  box-shadow:0 10px 20px rgba(0,0,0,.08);
}
.screen{display:none}
.screen.active{display:block}
input,select,button{
  width:100%; padding:10px; border-radius:12px; border:1px solid #e5e7eb;
}
button{cursor:pointer}
button.good{background:var(--sec); color:#fff; border:none}
button.warn{background:#f59e0b; color:#fff; border:none}
button.home{background:var(--pri); color:#fff; border:none; margin-top:8px}
.row{display:flex; gap:8px}
.row > *{flex:1}
.badge{display:inline-block; padding:4px 8px; border-radius:999px; background:#eef2ff; font-size:12px}
#chatBox{
  height:230px; overflow-y:auto; border:1px solid #e5e7eb; border-radius:14px;
  padding:8px; background:#fafafa;
}
.msg{margin-bottom:8px}
.user{color:var(--pri); font-weight:700}
.ai{color:#16a34a; font-weight:700}
.small{font-size:12px; color:#6b7280}
</style>
</head>

<body>
<header>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•±</header>

<div class="container">
  <div class="menu">
    <button onclick="show('login')" class="primary">ë¡œê·¸ì¸</button>
    <button onclick="show('home')">í™ˆ</button>
    <button onclick="show('sleep')">ìˆ˜ë©´</button>
    <button onclick="show('food')">ìŒì‹</button>
    <button onclick="show('game')">ê²Œì„</button>
    <button onclick="show('chat')">AI ìƒë‹´</button>
    <button onclick="logout()" class="warn">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <!-- ë¡œê·¸ì¸ -->
  <div class="screen" id="login">
    <div class="card">
      <h3>ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h3>
      <input id="name" placeholder="ì´ë¦„" />
      <input id="pw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" />
      <div class="row">
        <button onclick="signup()" class="good">íšŒì›ê°€ì…</button>
        <button onclick="login()" class="primary">ë¡œê·¸ì¸</button>
      </div>
      <p id="loginMsg" class="small"></p>
    </div>
  </div>

  <!-- í™ˆ -->
  <div class="screen" id="home">
    <div class="card">
      <h3>ì˜¤ëŠ˜ ìƒíƒœ</h3>
      <div class="row">
        <button onclick="setMood('ì¢‹ìŒ')" class="good">ğŸ˜„ ì¢‹ìŒ</button>
        <button onclick="setMood('ë³´í†µ')">ğŸ˜ ë³´í†µ</button>
        <button onclick="setMood('ë‚˜ì¨')" class="warn">ğŸ˜¢ ë‚˜ì¨</button>
      </div>
      <p id="moodText" class="small"></p>
      <div id="summary" class="badge"></div>
    </div>
  </div>

  <!-- ìˆ˜ë©´ -->
  <div class="screen" id="sleep">
    <div class="card">
      <h3>ìˆ˜ë©´ ê¸°ë¡</h3>
      <div class="row">
        <div>
          <label class="small">ì·¨ì¹¨</label>
          <input type="time" id="sleepStart" />
        </div>
        <div>
          <label class="small">ê¸°ìƒ</label>
          <input type="time" id="sleepEnd" />
        </div>
      </div>
      <button onclick="saveSleep()" class="primary">ì €ì¥</button>
      <p id="sleepResult" class="small"></p>
    </div>
  </div>

  <!-- ìŒì‹ -->
  <div class="screen" id="food">
    <div class="card">
      <h3>ê±´ê°• ìŒì‹ ì¶”ì²œ</h3>
      <p class="small">ì‹¤ì œ ê±´ê°• ì‹ì¬/ì‹ë‹¨ ê¸°ë°˜ ëŒ€ëŸ‰ ë°ì´í„°</p>
      <p id="foodText" class="badge"></p>
      <button onclick="pickFood()" class="good">ì¶”ì²œ</button>
    </div>
  </div>

  <!-- ê²Œì„ -->
  <div class="screen" id="game">
    <div class="card">
      <h3>ë¯¸ë‹ˆ í€´ì¦ˆ</h3>
      <p id="gameQ"></p>
      <input id="gameA" placeholder="ì •ë‹µ ì…ë ¥" />
      <button onclick="submitGame()" class="primary">ì œì¶œ</button>
      <p id="gameR" class="small"></p>
      <button onclick="newGame()">ë‹¤ìŒ ë¬¸ì œ</button>
    </div>
  </div>

  <!-- AI ìƒë‹´ -->
  <div class="screen" id="chat">
    <div class="card">
      <h3>AI ìƒë‹´</h3>
      <div id="chatBox"></div>
      <input id="chatInput" placeholder="ì§€ê¸ˆ ìƒíƒœë¥¼ ë§í•´ì¤˜ìš”" />
      <button onclick="sendChat()" class="primary">ì „ì†¡</button>
    </div>
  </div>
</div>

<script>
/* =====================
   ìƒíƒœ / ìœ í‹¸
===================== */
let user=null;
const $=id=>document.getElementById(id);
function show(id){
  if(!user && id!=="login"){ alert("ë¡œê·¸ì¸ í•„ìš”"); return; }
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  $(id).classList.add("active");
}

/* =====================
   ë¡œì»¬ íšŒì›
===================== */
function signup(){
  const n=$("name").value.trim(), p=$("pw").value;
  if(!n||!p){ $("loginMsg").textContent="ëª¨ë“  í•­ëª© ì…ë ¥"; return; }
  const u=JSON.parse(localStorage.users||"{}");
  if(u[n]){ $("loginMsg").textContent="ì´ë¯¸ ì¡´ì¬"; return; }
  u[n]={pw:p,data:{}};
  localStorage.users=JSON.stringify(u);
  $("loginMsg").textContent="ê°€ì… ì™„ë£Œ";
}
function login(){
  const u=JSON.parse(localStorage.users||"{}");
  const n=$("name").value.trim(), p=$("pw").value;
  if(u[n]?.pw===p){
    user=n; show("home"); loadSummary();
  } else $("loginMsg").textContent="ë¡œê·¸ì¸ ì‹¤íŒ¨";
}
function logout(){ user=null; show("login"); }

/* =====================
   ë°ì´í„° ëŒ€ëŸ‰ ìƒì„±
===================== */
const foods=[];
(function genFoods(){
  const bases=["í˜„ë¯¸ë°¥","ê·€ë¦¬","ì˜¤íŠ¸ë°€","í€´ë…¸ì•„","ë³´ë¦¬ë°¥"];
  const proteins=["ë‹­ê°€ìŠ´ì‚´","ì—°ì–´","ë‘ë¶€","ë Œí‹¸ì½©","ë³‘ì•„ë¦¬ì½©","ê³„ë€"];
  const veggies=["ë¸Œë¡œì½œë¦¬","ì‹œê¸ˆì¹˜","ì¼€ì¼","ì•„ìŠ¤íŒŒë¼ê±°ìŠ¤","í† ë§ˆí† ","íŒŒí”„ë¦¬ì¹´"];
  const fats=["ì•„ë³´ì¹´ë„","ì˜¬ë¦¬ë¸Œì˜¤ì¼","ê²¬ê³¼ë¥˜","ì¹˜ì•„ì”¨ë“œ"];
  for(let i=0;i<2500;i++){
    const f=[bases[i%bases.length],proteins[i%proteins.length],veggies[i%veggies.length],fats[i%fats.length]];
    foods.push(f.join(" + "));
  }
})();

const games=[];
(function genGames(){
  const qs=[
    ["ì„±ì¸ ê¶Œì¥ ìˆ˜ë©´ ì‹œê°„(ì‹œê°„)?","8"],
    ["í•˜ë£¨ ë¬¼ ê¶Œì¥ ì„­ì·¨ëŸ‰(L)?","2"],
    ["ê±·ê¸° ê¶Œì¥ ê±¸ìŒ ìˆ˜?","10000"],
    ["ë‹¨ë°±ì§ˆ 1ì¼ ê¶Œì¥ ì„­ì·¨ í•µì‹¬ ëª©ì ì€?","ê·¼ìœ¡"]
  ];
  for(let i=0;i<250;i++){
    const q=qs[i%qs.length];
    games.push({q:q[0],a:q[1]});
  }
})();

/* =====================
   ë©˜íƒˆ / ìˆ˜ë©´
===================== */
function setMood(m){
  saveUser(d=>d.mood=m);
  $("moodText").textContent="í˜„ì¬ ê¸°ë¶„: "+m;
  loadSummary();
}
function saveSleep(){
  const s=$("sleepStart").value, e=$("sleepEnd").value;
  if(!s||!e) return;
  saveUser(d=>d.sleep={s,e});
  $("sleepResult").textContent=`ê¸°ë¡ë¨: ${s} ~ ${e}`;
  loadSummary();
}
function saveUser(mut){
  const all=JSON.parse(localStorage.users||"{}");
  all[user].data ||= {};
  mut(all[user].data);
  localStorage.users=JSON.stringify(all);
}
function getUserData(){
  const all=JSON.parse(localStorage.users||"{}");
  return all[user]?.data||{};
}
function loadSummary(){
  const d=getUserData();
  const parts=[];
  if(d.mood) parts.push("ê¸°ë¶„:"+d.mood);
  if(d.sleep) parts.push("ìˆ˜ë©´:"+d.sleep.s+"~"+d.sleep.e);
  $("summary").textContent=parts.join(" Â· ");
}

/* =====================
   ìŒì‹ / ê²Œì„
===================== */
function pickFood(){
  $("foodText").textContent="ì¶”ì²œ: "+foods[Math.floor(Math.random()*foods.length)];
}
let currentGame={};
function newGame(){
  currentGame=games[Math.floor(Math.random()*games.length)];
  $("gameQ").textContent=currentGame.q;
  $("gameA").value=""; $("gameR").textContent="";
}
function submitGame(){
  $("gameR").textContent = ($("gameA").value.trim()===currentGame.a) ? "ì •ë‹µ!" : "ì˜¤ë‹µ Â· ì •ë‹µ: "+currentGame.a;
}

/* =====================
   AI ìƒë‹´ (ë¡œì»¬ ë£°)
===================== */
const aiRules=[
  {k:["í˜ë“¤","ì§€ì³","í”¼ê³¤"], r:"ë§ì´ ì§€ì³¤êµ°ìš”. ì˜¤ëŠ˜ì€ ì‰¬ëŠ” ê²ƒë„ ì¤‘ìš”í•œ ì„ íƒì´ì—ìš”."},
  {k:["ë¶ˆì•ˆ","ê±±ì •"], r:"ë¶ˆì•ˆí•  ë• ì§€ê¸ˆ í•  ìˆ˜ ìˆëŠ” í•œ ê°€ì§€ë§Œ ì •í•´ë³´ì„¸ìš”."},
  {k:["ìš°ìš¸","ìŠ¬í¼"], r:"ê·¸ë ‡ê²Œ ëŠë¼ëŠ” ê±´ ìì—°ìŠ¤ëŸ¬ì›Œìš”. í˜¼ìê°€ ì•„ë‹ˆì—ìš”."},
  {k:["ì•ˆë…•","í•˜ì´","hello"], r:"ì•ˆë…•í•˜ì„¸ìš”! ì§€ê¸ˆ ìƒíƒœë¥¼ ë§í•´ì¤˜ìš”."}
];
function sendChat(){
  const t=$("chatInput").value.trim(); if(!t) return;
  addMsg("user",t); $("chatInput").value="";
  let reply="ì¡°ê¸ˆ ë” ë§í•´ì¤˜ë„ ê´œì°®ì•„ìš”.";
  for(const r of aiRules){ if(r.k.some(k=>t.includes(k))){ reply=r.r; break; } }
  const d=getUserData();
  if(d.mood==="ë‚˜ì¨") reply+=" ì˜¤ëŠ˜ì€ ìì‹ ì—ê²Œ ê´€ëŒ€í•´ë„ ë¼ìš”.";
  addMsg("ai",reply);
}
function addMsg(type,text){
  const div=document.createElement("div");
  div.className="msg "+type; div.textContent=text;
  $("chatBox").appendChild(div);
  $("chatBox").scrollTop=$("chatBox").scrollHeight;
}

/* init */
show("login"); newGame();
</script>
</body>
</html>
