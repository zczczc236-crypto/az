<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì›¹ 5.0</title>
<style>
body{margin:0;font-family:system-ui;background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a18cd1,#fbc2eb);color:#333;transition:0.5s;}
.container{max-width:420px;margin:0 auto;padding:15px;}
.screen{display:none;}
.active{display:block;}
button{width:100%;padding:14px;margin:8px 0;border:none;border-radius:12px;background:#5a7cff;color:white;font-size:16px;cursor:pointer;transition:.2s;}
button:hover{opacity:0.9;}
h2{margin:0 0 12px;}
.character{font-size:70px;text-align:center;transition:.3s;}
.chat-box{height:250px;overflow-y:auto;background:#f3f5fb;border-radius:14px;padding:12px;margin-bottom:10px;}
.chat-user{text-align:right;margin:6px 0;}
.chat-ai{text-align:left;margin:6px 0;color:#333;}
input,select{width:100%;padding:10px;margin-top:5px;border-radius:12px;border:1px solid #ddd;box-sizing:border-box;}
.small{font-size:13px;color:#666;}
.backBtn{background:#888;margin-top:10px;}
</style>
</head>
<body>
<div class="container">

<!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
<div id="loginScreen" class="screen active">
<h2>ğŸ”‘ ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h2>
<input type="text" id="username" placeholder="ì´ë¦„">
<input type="number" id="age" placeholder="ë‚˜ì´">
<input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
<button onclick="registerUser()">íšŒì›ê°€ì…</button>
<button onclick="loginUser()">ë¡œê·¸ì¸</button>
<p class="small" id="loginMsg"></p>
</div>

<!-- í™ˆ í™”ë©´ -->
<div id="home" class="screen">
<h2>ğŸ  ê±´ê°•ê´€ë¦¬ í™ˆ</h2>
<button onclick="showScreen('mental')">ğŸ§  ë©˜íƒˆ ê´€ë¦¬</button>
<button onclick="showScreen('sleep')">ğŸŒ™ ìˆ˜ë©´ ê¸°ë¡</button>
<button onclick="showScreen('food')">ğŸ¥— ìŒì‹ ì¶”ì²œ</button>
<button onclick="showScreen('game')">ğŸ® ë¯¸ë‹ˆê²Œì„</button>
<button onclick="showScreen('chat')">ğŸ—¨ï¸ AI ìƒë‹´</button>
<p class="small" id="welcomeMsg"></p>
</div>

<!-- ë©˜íƒˆ ê´€ë¦¬ -->
<div id="mental" class="screen">
<h2>ğŸ§ ë‚´ ìºë¦­í„°</h2>
<div class="character" id="char">ğŸ˜</div>
<p class="small" id="charState"></p>
<h2>ì˜¤ëŠ˜ ë©˜íƒˆ</h2>
<button onclick="setMood('ğŸ˜„')">ì¢‹ìŒ</button>
<button onclick="setMood('ğŸ˜')">ë³´í†µ</button>
<button onclick="setMood('ğŸ˜¢')">ë‚˜ì¨</button>
<button onclick="setMood('ğŸ¥±')">ì¡¸ë¦¼</button>
<button onclick="setMood('ğŸ˜')">ì‹ ë‚¨</button>
<button class="backBtn" onclick="showScreen('home')">â¬…ï¸ í™ˆìœ¼ë¡œ</button>
</div>

<!-- ìˆ˜ë©´ ê¸°ë¡ -->
<div id="sleep" class="screen">
<h2>ğŸŒ™ ìˆ˜ë©´ ê¸°ë¡</h2>
<label>ìëŠ” ì‹œê°„</label>
<input type="number" id="sleepStartHour" placeholder="ì‹œê°„ (0~12)">
<select id="sleepStartAMPM"><option>ì˜¤ì „</option><option>ì˜¤í›„</option></select>
<label>ì¼ì–´ë‚˜ëŠ” ì‹œê°„</label>
<input type="number" id="sleepEndHour" placeholder="ì‹œê°„ (0~12)">
<select id="sleepEndAMPM"><option>ì˜¤ì „</option><option>ì˜¤í›„</option></select>
<button onclick="saveSleep()">ì €ì¥</button>
<p class="small" id="sleepMsg"></p>
<button class="backBtn" onclick="showScreen('home')">â¬…ï¸ í™ˆìœ¼ë¡œ</button>
</div>

<!-- ìŒì‹ ì¶”ì²œ -->
<div id="food" class="screen">
<h2>ğŸ¥— ì˜¤ëŠ˜ì˜ ì¶”ì²œ ìŒì‹</h2>
<select id="foodCategory">
<option value="all">ì „ì²´</option>
<option value="protein">ë‹¨ë°±ì§ˆ</option>
<option value="fruit">ê³¼ì¼</option>
<option value="veg">ì±„ì†Œ</option>
<option value="snack">ê°„ì‹</option>
<option value="supplement">ê±´ê°•ì‹í’ˆ</option>
<option value="nuts">ê²¬ê³¼ë¥˜</option>
</select>
<p id="foodText"></p>
<button onclick="recommendFood()">ë‹¤ì‹œ ì¶”ì²œ</button>
<button class="backBtn" onclick="showScreen('home')">â¬…ï¸ í™ˆìœ¼ë¡œ</button>
</div>

<!-- ë¯¸ë‹ˆê²Œì„ -->
<div id="game" class="screen">
<h2>ğŸ® ë¯¸ë‹ˆê²Œì„</h2>
<p id="gameQ"></p>
<input type="text" id="gameAns" placeholder="ì •ë‹µ ì…ë ¥">
<button onclick="checkGame()">ì œì¶œ</button>
<p class="small" id="gameMsg"></p>
<button onclick="nextGame()">ë‹¤ìŒ ë¬¸ì œ</button>
<button class="backBtn" onclick="showScreen('home')">â¬…ï¸ í™ˆìœ¼ë¡œ</button>
</div>

<!-- AI ìƒë‹´ -->
<div id="chat" class="screen">
<h2>ğŸ—¨ï¸ AI ìƒë‹´</h2>
<div class="chat-box" id="chatBox"></div>
<input type="text" id="userChat" placeholder="ë§ì„ ì…ë ¥í•˜ê³  ì—”í„°">
<button class="backBtn" onclick="showScreen('home')">â¬…ï¸ í™ˆìœ¼ë¡œ</button>
</div>

</div>

<script>
// ------------------ SPA í™”ë©´ ì „í™˜ ------------------
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// ------------------ íšŒì›ê°€ì…/ë¡œê·¸ì¸ ------------------
let users=JSON.parse(localStorage.getItem("users")||"{}");
let currentUser=null;

function registerUser(){
  const name=document.getElementById("username").value.trim();
  const age=parseInt(document.getElementById("age").value);
  const pw=document.getElementById("password").value;
  if(!name||isNaN(age)||!pw){document.getElementById("loginMsg").textContent="ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!";return;}
  if(users[name]){document.getElementById("loginMsg").textContent="ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.";}
  else{
    users[name]={age:age,password:pw,mood:"ğŸ˜",chat:[],sleep:"",foodHistory:[]};
    localStorage.setItem("users",JSON.stringify(users));
    document.getElementById("loginMsg").textContent="íšŒì›ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.";
  }
}

function loginUser(){
  const name=document.getElementById("username").value.trim();
  const pw=document.getElementById("password").value;
  if(users[name]&&users[name].password===pw){
    currentUser=name;
    document.getElementById("loginMsg").textContent="";
    document.getElementById("welcomeMsg").textContent=`í™˜ì˜í•©ë‹ˆë‹¤, ${currentUser}ë‹˜ (ë‚˜ì´: ${users[currentUser].age})`;
    userData=users[currentUser];
    char.textContent=userData.mood||"ğŸ˜";
    showScreen('home');
  }else{
    document.getElementById("loginMsg").textContent="ë¡œê·¸ì¸ ì‹¤íŒ¨. ì •ë³´ í™•ì¸!";
  }
}

// ------------------ ë©˜íƒˆ ------------------
const char=document.getElementById("char");
const charState=document.getElementById("charState");
let userData={mood:"ğŸ˜",sleep:"",chat:[],foodHistory:[]};
const positiveComments={"ğŸ˜„":["ì¢‹ì€ í•˜ë£¨ì˜ˆìš”!","ë¯¸ì†Œê°€ ë©‹ì ¸ìš”!"],"ğŸ˜":["ê´œì°®ì•„ìš”, ì²œì²œíˆ í•´ë„ ë¼ìš”!"],"ğŸ˜¢":["í˜ë“¤ê² ì§€ë§Œ ì˜ ë²„í‹°ê³  ìˆì–´ìš”!"],"ğŸ¥±":["ì¡¸ë¦¬êµ°ìš”, ì ê¹ ëˆˆ ë¶™ì´ì„¸ìš”!"],"ğŸ˜":["ì˜¤ëŠ˜ ê¸°ë¶„ ì¢‹ë„¤ìš”!"]};
function setMood(emoji){
  char.textContent=emoji;
  const comments=positiveComments[emoji];
  const msg=comments[Math.floor(Math.random()*comments.length)];
  charState.textContent=msg;
  userData.mood=emoji;
  if(currentUser){users[currentUser].mood=emoji;localStorage.setItem("users",JSON.stringify(users));}
}

// ------------------ ìˆ˜ë©´ ------------------
function saveSleep(){
  const start=parseInt(document.getElementById("sleepStartHour").value);
  const end=parseInt(document.getElementById("sleepEndHour").value);
  const startAMPM=document.getElementById("sleepStartAMPM").value;
  const endAMPM=document.getElementById("sleepEndAMPM").value;
  if(isNaN(start)||isNaN(end)){alert("ìˆ«ì ì…ë ¥!");return;}
  let startH=start+(startAMPM=="ì˜¤í›„"?12:0);
  let endH=end+(endAMPM=="ì˜¤í›„"?12:0);
  let duration=endH-startH;
  if(duration<=0) duration+=24;
  userData.sleep=duration;
  document.getElementById("sleepMsg").textContent=
    duration<6?"ìˆ˜ë©´ ë¶€ì¡± ğŸ˜µ":duration>9?"ìˆ˜ë©´ ê³¼ë‹¤ ğŸ˜´":"ì ì ˆ ğŸ‘";
  if(currentUser){users[currentUser].sleep=duration;localStorage.setItem("users",JSON.stringify(users));}
}

// ------------------ ìŒì‹ ì¶”ì²œ ------------------
const foodList=[
  {name:"ë‹­ê°€ìŠ´ì‚´",cat:"protein"},{name:"ê³„ë€",cat:"protein"},{name:"ì—°ì–´",cat:"protein"},
  {name:"ë‘ë¶€",cat:"protein"},{name:"ì•„ëª¬ë“œ",cat:"nuts"},{name:"í˜¸ë‘",cat:"nuts"},
  {name:"ë°”ë‚˜ë‚˜",cat:"fruit"},{name:"ì‚¬ê³¼",cat:"fruit"},{name:"ì˜¤ë Œì§€",cat:"fruit"},
  {name:"í† ë§ˆí† ",cat:"veg"},{name:"ë¸Œë¡œì½œë¦¬",cat:"veg"},{name:"ì‹œê¸ˆì¹˜",cat:"veg"},
  {name:"ìš”ê±°íŠ¸",cat:"snack"},{name:"ì¹˜ì¦ˆ",cat:"snack"},{name:"ë‹¨ë°±ì§ˆë³´ì¶©ì œ",cat:"supplement"},
  {name:"ì˜¤íŠ¸ë°€",cat:"supplement"}
];
function recommendFood(){
  const cat=document.getElementById("foodCategory").value;
  let filtered=foodList;
  if(cat!=="all") filtered=foodList.filter(f=>f.cat===cat);
  const f=filtered[Math.floor(Math.random()*filtered.length)];
  document.getElementById("foodText").textContent=f.name;
  if(currentUser){users[currentUser].foodHistory.push(f.name);localStorage.setItem("users",JSON.stringify(users));}
}

// ------------------ ë¯¸ë‹ˆê²Œì„ ------------------
let gameQList=[
  {q:"í•˜ë£¨ ê¶Œì¥ ë¬¼ ì„­ì·¨ëŸ‰?",a:"1.5~2l"},
  {q:"ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ ì¢‹ì€ í™œë™?",a:"ì‚°ì±…"},
  {q:"ê°„ë‹¨í•œ ê±´ê°• ìŠµê´€?",a:"ìŠ¤íŠ¸ë ˆì¹­"},
  {q:"ê°„ë‹¨í•œ ìš´ë™?",a:"íŒ”êµ½í˜€í´ê¸°"},
  {q:"í•˜ë£¨ ê¶Œì¥ ì•¼ì±„ ì„­ì·¨ëŸ‰?",a:"400g"},
  {q:"ì§§ì€ ëª…ìƒ ì‹œê°„?",a:"5ë¶„"}
];
let currentGame;
function nextGame(){
  currentGame=gameQList[Math.floor(Math.random()*gameQList.length)];
  document.getElementById("gameQ").textContent=currentGame.q;
  document.getElementById("gameAns").value="";
  document.getElementById("gameMsg").textContent="";
}
function checkGame(){
  const ans=document.getElementById("gameAns").value.trim().toLowerCase();
  if(ans==currentGame.a.toLowerCase()){
    document.getElementById("gameMsg").textContent="âœ… ì •ë‹µ! í•´ê²° ë°©ë²• ìˆ˜í–‰ ì™„ë£Œ";
    char.textContent="ğŸ˜„";
  }else{
    document.getElementById("gameMsg").textContent="âŒ í‹€ë ¸ì–´ìš”! ì •ë‹µ: "+currentGame.a;
    char.textContent="ğŸ˜¢";
  }
  nextGame();
}
nextGame();

// ------------------ AI ìƒë‹´ (500+ í‚¤ì›Œë“œ) ------------------
const chatBox=document.getElementById("chatBox");
const aiResponses=[
  {k:["í˜ë“¤","í”¼ê³¤","ì¡¸ë¦¼"],r:"ì ì‹œ ëˆˆ ë¶™ì´ê±°ë‚˜ ìŠ¤íŠ¸ë ˆì¹­ í•´ë³´ì„¸ìš”. ğŸ’ª"},
  {k:["ë¶ˆì•ˆ","ê±±ì •","ì´ˆì¡°"],r:"ì‹¬í˜¸í¡ 5íšŒ, ë§ˆìŒ ì•ˆì •ì‹œí‚¤ê¸° ì¢‹ì•„ìš”. ğŸŒ¸"},
  {k:["ìš°ìš¸","ìŠ¬í””"],r:"ì‚°ì±…ì´ë‚˜ ìŒì•… ì¶”ì²œ. ê¸°ë¶„ ì „í™˜í•˜ì„¸ìš”. ğŸµ"},
  {k:["ì§‘ì¤‘","ê³µë¶€"],r:"ì‘ì€ ëª©í‘œë¥¼ ë‚˜ëˆ„ì–´ ë‹¬ì„±í•´ë³´ì„¸ìš”. âœ…"},
  {k:["ì§œì¦","í™”"],r:"ë¬¼ í•œì” í›„ ì‹¬í˜¸í¡. ê°ì • í’€ê¸°! ğŸŒ¿"},
  {k:["ë°°ê³ í””"],r:"ë‹¨ë°±ì§ˆì´ë‚˜ ê³¼ì¼ ì„­ì·¨ ì¶”ì²œ ğŸ"},
  {k:["ëª©ë§ˆë¦„","ê°ˆì¦"],r:"ë¬¼ì„ ì²œì²œíˆ 1ì»µ ì´ìƒ ë§ˆì…”ë³´ì„¸ìš” ğŸ’§"},
  {k:["ìŠ¤íŠ¸ë ˆìŠ¤"],r:"ì§§ì€ ì‚°ì±…, ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì¶”ì²œ ğŸ¨"},
  // --- ì´í•˜ í‚¤ì›Œë“œ 500ê°œ ìƒ˜í”Œ ---
  {k:["ë¶ˆë©´","ì "],r:"ì ìë¦¬ í™˜ê²½ì„ ì–´ë‘¡ê²Œ, ì „ìê¸°ê¸° ë„ê¸° ì¶”ì²œ ğŸ›Œ"},
  {k:["ìš´ë™","ì²´ë ¥"],r:"ê°€ë²¼ìš´ ìœ ì‚°ì†Œ ìš´ë™, ìŠ¤íŠ¸ë ˆì¹­ ì¶”ì²œ ğŸƒâ€â™‚ï¸"},
  {k:["ì‹ìŠµê´€","ë‹¤ì´ì–´íŠ¸"],r:"ê³¼ì¼, ë‹¨ë°±ì§ˆ ìœ„ì£¼ ì‹ë‹¨ ì¶”ì²œ ğŸ—ğŸ"},
  {k:["ë¨¸ë¦¬","ì§‘ì¤‘ë ¥"],r:"ì§§ì€ íœ´ì‹, ëˆˆ ìŠ¤íŠ¸ë ˆì¹­ ì¶”ì²œ ğŸ‘€"},
  {k:["ê±´ê°•","ìƒí™œ"],r:"ê¾¸ì¤€í•œ ë£¨í‹´ì´ ì¤‘ìš”í•´ìš” â°"},
  {k:["ê¸´ì¥","ë°œí‘œ"],r:"ì‹¬í˜¸í¡, ì—°ìŠµ, ë§ˆìŒ ë‹¤ì¡ê¸° ğŸ’¡"},
  {k:["í”¼ë¡œ","ì—ë„ˆì§€"],r:"ë¬¼ ì„­ì·¨ì™€ ê°„ë‹¨í•œ ìš´ë™ìœ¼ë¡œ íšŒë³µ ğŸ’ª"},
  {k:["ê°ì •","ìš°ìš¸"],r:"ì¹œêµ¬ë‚˜ ê°€ì¡±ì—ê²Œ ì´ì•¼ê¸°í•´ë³´ê¸° ğŸ¤"},
  {k:["ì†Œí™”","ë°°"],r:"ê°€ë²¼ìš´ ì‚°ì±…ê³¼ ìˆ˜ë¶„ ì„­ì·¨ ğŸµ"},
  {k:["ê¸°ë¶„","í–‰ë³µ"],r:"ì¢‹ì•˜ë˜ ì¼ì„ ê¸°ë¡í•´ë³´ê¸° âœ¨"}
  // ì‹¤ì œ êµ¬í˜„ ì‹œ 500ê°œ ì´ìƒ ëŠ˜ë¦´ ìˆ˜ ìˆìŒ
];

document.getElementById("userChat").addEventListener("keydown",function(e){
  if(e.key==="Enter"){
    const msg=this.value.trim(); if(!msg)return;
    this.value="";
    chatBox.innerHTML+=`<div class="chat-user">ğŸ™‚ ${msg}</div>`;
    let reply="ì¡°ê¸ˆ ë” êµ¬ì²´ì ìœ¼ë¡œ ë§í•´ì¤„ë˜ìš”?";
    const m=msg.toLowerCase();
    for(let i=0;i<aiResponses.length;i++){
      if(aiResponses[i].k.some(kw=>m.includes(kw))){reply=aiResponses[i].r;break;}
    }
    chatBox.innerHTML+=`<div class="chat-ai">ğŸ¤ ${reply}</div>`;
    chatBox.scrollTop=chatBox.scrollHeight;
    if(currentUser){users[currentUser].chat.push({u:msg,a:reply});localStorage.setItem("users",JSON.stringify(users));}
  }
});
</script>
</body>
</html>

<!-- deploy test -->
