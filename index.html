<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•± - AI ìƒë‹´ ì—…ê·¸ë ˆì´ë“œ</title>
<style>
body { font-family: system-ui; margin:0; background: linear-gradient(135deg,#a1c4fd,#c2e9fb); color:#333; }
.container { max-width:420px; margin:0 auto; padding:15px; }
header { background:#4f46e5; color:white; text-align:center; padding:15px; font-size:18px; border-radius:0 0 15px 15px;}
.menu { display:flex; justify-content:space-around; margin:10px 0; flex-wrap:wrap; }
.menu button { flex:1; margin:3px; padding:10px; border:none; border-radius:10px; background:#6b7280; color:white; cursor:pointer;}
.screen { display:none; }
.screen.active { display:block;}
.card { background:white; border-radius:16px; padding:15px; margin-bottom:15px; box-shadow:0 6px 15px rgba(0,0,0,.08);}
input,select { width:100%; padding:8px;margin-top:5px;margin-bottom:5px;}
#chatBox { height:250px; overflow-y:auto; border:1px solid #ddd; padding:10px; border-radius:10px; background:#f9f9f9;}
.msg { margin-bottom:10px;}
.user { font-weight:bold; color:#4f46e5;}
.ai { font-weight:bold; color:#16a34a;}
button.homeBtn { background:#4f46e5; color:white; margin-top:10px;}
</style>
</head>
<body>
<header>ê±´ê°•Â·ë©˜íƒˆ ê´€ë¦¬ ì•± - AI ìƒë‹´ ì—…ê·¸ë ˆì´ë“œ</header>

<div class="container">
  <div class="menu">
    <button onclick="showScreen('login')">ë¡œê·¸ì¸</button>
    <button onclick="showScreen('mental')">ë©˜íƒˆ</button>
    <button onclick="showScreen('sleep')">ìˆ˜ë©´ ê¸°ë¡</button>
    <button onclick="showScreen('food')">ìŒì‹</button>
    <button onclick="showScreen('game')">ë¯¸ë‹ˆê²Œì„</button>
    <button onclick="showScreen('chat')">AI ìƒë‹´</button>
    <button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <!-- ë¡œê·¸ì¸ -->
  <div class="screen" id="login">
    <div class="card">
      <h2>ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h2>
      <input type="text" id="username" placeholder="ì´ë¦„">
      <input type="number" id="age" placeholder="ë‚˜ì´">
      <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
      <button onclick="signup()">íšŒì›ê°€ì…</button>
      <button onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginMsg"></p>
    </div>
  </div>

  <!-- ë©˜íƒˆ -->
  <div class="screen" id="mental">
    <div class="card">
      <h2>ğŸ§ ë©˜íƒˆ ìƒíƒœ</h2>
      <button onclick="setMood('ğŸ˜„')">ì¢‹ìŒ</button>
      <button onclick="setMood('ğŸ˜')">ë³´í†µ</button>
      <button onclick="setMood('ğŸ˜¢')">ë‚˜ì¨</button>
      <p id="moodComment"></p>
      <button class="homeBtn" onclick="showScreen('mental')">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>

  <!-- ìˆ˜ë©´ -->
  <div class="screen" id="sleep">
    <div class="card">
      <h2>ğŸŒ™ ìˆ˜ë©´ ê¸°ë¡</h2>
      <label>ìëŠ” ì‹œê°„</label>
      <input type="time" id="sleepStart">
      <label>ì¼ì–´ë‚˜ëŠ” ì‹œê°„</label>
      <input type="time" id="sleepEnd">
      <label>ì˜¤ì „/ì˜¤í›„</label>
      <select id="sleepAMPM"><option>AM</option><option>PM</option></select>
      <button onclick="saveSleep()">ì €ì¥</button>
      <p id="sleepLog"></p>
      <button class="homeBtn" onclick="showScreen('mental')">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>

  <!-- ìŒì‹ -->
  <div class="screen" id="food">
    <div class="card">
      <h2>ğŸ¥— ì˜¤ëŠ˜ì˜ ì¶”ì²œ ìŒì‹</h2>
      <p id="foodDisplay"></p>
      <button onclick="pickFood()">ìƒˆë¡œ ì¶”ì²œ</button>
      <button class="homeBtn" onclick="showScreen('mental')">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>

  <!-- ë¯¸ë‹ˆê²Œì„ -->
  <div class="screen" id="game">
    <div class="card">
      <h2>ğŸ® ë¯¸ë‹ˆê²Œì„</h2>
      <p id="gameQ"></p>
      <input type="text" id="gameAns" placeholder="ì •ë‹µ ì…ë ¥">
      <button onclick="submitGame()">ì œì¶œ</button>
      <p id="gameResult"></p>
      <button onclick="newGame()">ë‹¤ìŒ ë¬¸ì œ</button>
      <button class="homeBtn" onclick="showScreen('mental')">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>

  <!-- AI ìƒë‹´ -->
  <div class="screen" id="chat">
    <div class="card">
      <h2>ğŸ’¬ AI ìƒë‹´</h2>
      <div id="chatBox"></div>
      <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ ì…ë ¥">
      <button onclick="sendMessage()">ì „ì†¡</button>
      <button class="homeBtn" onclick="showScreen('mental')">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>
</div>

<script>
// ======= ìƒ˜í”Œ ë°ì´í„° =======
const foods=[]; for(let i=1;i<=5000;i++){foods.push("ìŒì‹"+i);}
const aiData=[]; for(let i=1;i<=2000;i++){aiData.push({k:["í‚¤ì›Œë“œ"+i],r:["í•´ê²°ì±… "+i]});}
const games=[]; for(let i=1;i<=500;i++){games.push({q:"ë¬¸ì œ"+i,a:"ì •ë‹µ"+i});}

// ======= ìƒíƒœ =======
let currentGame={},currentUser=null,chatHistory=[];
let moodComments={"ğŸ˜„":["ì¢‹ì•„ìš”! ë©‹ì§„ í•˜ë£¨ì˜ˆìš” ğŸ˜„","í–‰ë³µí•œ ê¸°ìš´ì´ ëŠê»´ì ¸ìš”!"],
                 "ğŸ˜":["ë³´í†µì´ë„¤ìš”. ì²œì²œíˆ ê°€ë„ ê´œì°®ì•„ìš”.","ê· í˜• ì¡íŒ í•˜ë£¨ ë³´ë‚´ìš”!"],
                 "ğŸ˜¢":["í˜ë“¤ì–´ë„ ì˜ í•˜ê³  ìˆì–´ìš”.","ì¡°ê¸ˆ ì‰¬ì–´ë„ ê´œì°®ì•„ìš”."]};

// ======= í™”ë©´ ì „í™˜ =======
function showScreen(id){
  if(!currentUser && id!=="login"){alert("ë¡œê·¸ì¸ í•„ìš”!"); return;}
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// ======= íšŒì› =======
function signup(){
  let name=document.getElementById("username").value;
  let age=document.getElementById("age").value;
  let pw=document.getElementById("password").value;
  if(!name||!age||!pw){document.getElementById("loginMsg").textContent="ëª¨ë“  í•­ëª© ì…ë ¥!";return;}
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[name]){document.getElementById("loginMsg").textContent="ì´ë¯¸ ìˆëŠ” ì´ë¦„";return;}
  users[name]={age:age,password:pw};
  localStorage.setItem("users",JSON.stringify(users));
  document.getElementById("loginMsg").textContent="íšŒì›ê°€ì… ì™„ë£Œ!";
}

function login(){
  let name=document.getElementById("username").value;
  let pw=document.getElementById("password").value;
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[name]&&users[name].password===pw){
    currentUser={name:name,age:users[name].age};
    document.getElementById("loginMsg").textContent=`í™˜ì˜í•©ë‹ˆë‹¤, ${name}ë‹˜!`;
    showScreen("mental"); loadUserData();
  } else {document.getElementById("loginMsg").textContent="ë¡œê·¸ì¸ ì‹¤íŒ¨";}
}

function logout(){currentUser=null; showScreen("login");}

// ======= ë©˜íƒˆ =======
function setMood(m){
  document.getElementById("moodComment").textContent=moodComments[m][Math.floor(Math.random()*moodComments[m].length)];
  if(currentUser){let d=JSON.parse(localStorage.getItem("userData")||"{}"); if(!d[currentUser.name])d[currentUser.name]={}; d[currentUser.name].mood=m; localStorage.setItem("userData",JSON.stringify(d));}
}

// ======= ìˆ˜ë©´ =======
function saveSleep(){
  let start=document.getElementById("sleepStart").value;
  let end=document.getElementById("sleepEnd").value;
  let ampm=document.getElementById("sleepAMPM").value;
  if(!currentUser){alert("ë¡œê·¸ì¸ í•„ìš”");return;}
  if(!start||!end){alert("ì‹œê°„ ì…ë ¥!"); return;}
  let d=JSON.parse(localStorage.getItem("userData")||"{}"); if(!d[currentUser.name])d[currentUser.name]={};
  d[currentUser.name].sleep=`${start} ~ ${end} ${ampm}`;
  localStorage.setItem("userData",JSON.stringify(d));
  document.getElementById("sleepLog").textContent=`ìµœê·¼ ê¸°ë¡: ${d[currentUser.name].sleep}`;
}

function loadUserData(){
  let d=JSON.parse(localStorage.getItem("userData")||"{}");
  if(d[currentUser.name] && d[currentUser.name].sleep){document.getElementById("sleepLog").textContent=`ìµœê·¼ ê¸°ë¡: ${d[currentUser.name].sleep}`;}
}

// ======= ìŒì‹ =======
function pickFood(){ let f=foods[Math.floor(Math.random()*foods.length)]; document.getElementById("foodDisplay").textContent=`ì˜¤ëŠ˜ ì¶”ì²œ: ${f}`; }

// ======= ë¯¸ë‹ˆê²Œì„ =======
function newGame(){ currentGame=games[Math.floor(Math.random()*games.length)]; document.getElementById("gameQ").textContent=currentGame.q; document.getElementById("gameAns").value=""; document.getElementById("gameResult").textContent="";}
function submitGame(){ let ans=document.getElementById("gameAns").value.trim(); if(ans===currentGame.a){document.getElementById("gameResult").textContent="âœ… ì •ë‹µ!";} else {document.getElementById("gameResult").textContent=`âŒ ì˜¤ë‹µ! ì •ë‹µ: ${currentGame.a}`;}}

// ======= AI ìƒë‹´ =======
function sendMessage(){
  let input=document.getElementById("userInput").value.trim(); if(!input)return;
  addChat("user",input); document.getElementById("userInput").value="";
  chatHistory.push({from:"user",msg:input});

  // ë¬¸ë§¥ ê¸°ë°˜ + ë©˜íƒˆ ë°˜ì˜
  let reply="ì£„ì†¡í•´ìš”, ì´í•´ ëª»í–ˆì–´ìš” ğŸ™";
  if(currentUser){
    let d=JSON.parse(localStorage.getItem("userData")||"{}");
    let mood=d[currentUser.name]?.mood || "ğŸ˜";
    for(let item of aiData){
      if(item.k.some(kw=>input.includes(kw))){
        reply=item.r[Math.floor(Math.random()*item.r.length)];
        break;
      }
    }
    if(/ì•ˆë…•|í•˜ì´|hello/i.test(input)){reply="ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë– ì‹ ê°€ìš”?";}
    // ë©˜íƒˆ ìƒíƒœì— ë§ì¶° ì¶”ê°€ ê³µê°
    if(mood==="ğŸ˜¢") reply="ì¡°ê¸ˆ í˜ë“ ê°€ë³´ë„¤ìš”. ì²œì²œíˆ í˜¸í¡í•˜ê³  ìì‹ ì—ê²Œ ì—¬ìœ ë¥¼ ì£¼ì„¸ìš”.";
    else if(mood==="ğŸ˜") reply+=" ê· í˜• ì¡íŒ í•˜ë£¨ë¥¼ ë³´ë‚´ê³  ìˆë„¤ìš”!";
    else if(mood==="ğŸ˜„") reply+=" ì˜¤ëŠ˜ë„ í™œê¸°ì°¨ê²Œ ë³´ë‚´ê³  ìˆë„¤ìš”!";
  }
  addChat("ai",reply);
  chatHistory.push({from:"ai",msg:reply});
}

function addChat(type,text){
  let chat=document.getElementById("chatBox");
  let div=document.createElement("div");
  div.className="msg "+type; div.textContent=text;
  chat.appendChild(div); chat.scrollTop=chat.scrollHeight;
}

// ì´ˆê¸° í™”ë©´
showScreen("login");
newGame();
</script>
</body>
</html>

<!-- deploy test -->
